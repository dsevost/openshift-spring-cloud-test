#!/bin/bash -e

set -x 
#
# S2I assemble script for the 'springboot-s2i' image.
# The 'assemble' script builds your application source ready to run.
#
# For more information refer to the documentation:
# https://github.com/openshift/source-to-image/blob/master/docs/builder_image.md
#

echo !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

source $S2I_PATH/common.sh

function check_build() {
  echo "$FUNCNAME: overloaded"
}

function restore_artifacts() {
  echo "$FUNCNAME: overloaded"

  if [ "$(ls /tmp/artifacts/ 2>/dev/null)" ]; then
    echo "---> Restoring build artifacts"
    pwd
    ls -laZ /tmp/artifacts
    ( tar -C /tmp/artifacts -cvf - . | tar --no-overwrite-dir -C / -xf - ) || true
  fi
}

source $S2I_PATH/assemble
